<!DOCTYPE html><html lang="zh"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>数据库要点 | 东坡烟尘</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.1"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">数据库要点</h1><a id="logo" href="/.">东坡烟尘</a><p class="description">静能生悟，即鸟啼花落，都是化机。</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 主页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/timeline/"><i class="fa fa-calendar"> 时间线</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">数据库要点</h1><div class="post-meta">Sep 7, 2016<span> | </span><span class="category"><a href="/categories/technology/">technology</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-thread-key="database/" href="/database/#comments" class="ds-thread-count"></a><div class="post-content"><p>  数据库(Database)是按照数据结构来组织、存储和管理数据的仓库，它产生于距今六十多年前，随着信息技术和市场的发展，特别是二十世纪九十年代以后，数据管理不再仅仅是存储和管理数据，而转变成用户所需要的各种数据管理的方式。数据库有很多种类型，从最简单的存储有各种数据的表格到能够进行海量数据存储的大型数据库系统都在各个方面得到了广泛的应用。</p>
<ol>
<li><p>索引的类型:<br> (1) 唯一索引<br> (2) 非唯一索引<br> (3) 主键索引<br> (4) 聚集索引</p>
</li>
<li><p>主键与索引的区别:<br> (1) 主键一般在创建表的时候指定，而索引可以在任何时候创建；<br> (2) 一个表只能有一个主键，但可以有多个索引；<br> (3) 主键也是一种索引，但索引不是主键;<br> (4) 索引可以创建也可以删除。</p>
<p> 参考资料：Mysql索引详解大全<br> <a href="http://www.cnblogs.com/renfanzi/p/5742650.html" target="_blank" rel="external">http://www.cnblogs.com/renfanzi/p/5742650.html</a></p>
</li>
<li><p>C语言操作库函数：</p>
<p> <a href="http://blog.csdn.net/caisini_vc/article/details/38271991" target="_blank" rel="external">http://blog.csdn.net/caisini_vc/article/details/38271991</a></p>
<p> 特别注意：<br> （1）对于包含二进制数据的查询，必须使用 mysql_real_query()，而不是 mysql_query()，因为二进制代码数据可能包含“ \0”字符，而且前者比后者查询更快，因为它不会在查询字符串上调用 strlen()。项目中尽量使用前者。<br> （2）执行查询指令之后，再用 mysql_store_result() 函数获取查询结果。此函数返回的是结构指针，后面还需要用代码把结构的内容读到自己的程序里来。对于大的结果集，该函数所需的内存可能很大，甚至发生内存溢出。<br> （3）获取结果集之后，再用mysql_fetch_row() 循环读出每一行，该函数返回一个数组。<br> （4）mysql_commit() 提交事务，mysql_rollback() 回滚事务。</p>
</li>
<li><p>商用系统部分设计要点（以员工管理系统为例）<br>（1）包含两大模块：平台模块（实现通用功能如配置文件、日志、数据库操作接口等）和业务模块（实现员工管理业务）。<br>（2）配置文件一般要做到接口可以被各个子模块访问。配置数据应分为整数和字符串。配置文件的格式一般遵循 [module] config=value 的语法。<br>（3）日志信息非常有用，一般而言应该打印在日志文件中的信息包括：（a）系统日志信息（如各模块的启动信息）；（b）错误日志信息；（c）告警日志信息（比如系统最多支持1000个员工，当使用达到900人时发出告警）；（d）调试日志信息（或叫消息日志信息）。对应地，把上述四类信息定义为4个级别：系统日志级别、错误日志级别、告警日志级别、消息日志级别。交付给用户时只留下系统日志和错误日志。一般应允许用户在配置文件中修改日志级别。<br>（4）日志模块的接口要考虑通用性，因为各个业务模块要打印的信息可能结构不同，有整数、字符串等信息。每个模块调用时都可以选择自己的打印级别。<br>（5）日志模块要考虑文件系统允许的最大文件大小，比如可能有些系统限制最大2G，这时候要新建日志文件并将过去的日志按日期重命名整理。<br>（6）写日志的任务应该放到链表（异步任务队列），避免影响业务模块的性能。<br>（7）日志是独立的文件，应该单独占用一个目录 ./log/ 。</p>
</li>
<li><p>以Log4j为例，日志记录器（Logger）的行为是分等级的。具体分为：OFF、 FATAL、ERROR、WARN、INFO、DEBUG、TRACE、ALL或者您定义的级别。Log4j建议只使用四个级别，优先级从高到低分别是 ERROR、WARN、INFO、DEBUG。通过在这里定义的级别，您可以控制到应用程序中相应级别的日志信息的开关。比如在这里定义了INFO级别， 则应用程序中所有DEBUG级别的日志信息将不被打印出来。程序会打印高于或等于所 设置级别的日志，设置的日志等级越高，打印出来的日志就越少。如果设置级别为INFO，则优先级高于等于INFO级别（如：INFO、 WARN、ERROR）的日志信息将可以被输出,小于该级别的如DEBUG将不会被输出。</p>
</li>
<li><p>Python项目中日志文件的配置方法：<br> <a href="http://python.jobbole.com/81666/" target="_blank" rel="external">http://python.jobbole.com/81666/</a></p>
</li>
</ol>
<ol>
<li><p>一个会话至少包含一个连接，可以完成多个事务。</p>
</li>
<li><p>高并发的概念：高并发是指多个线程同时调用你的接口的时候不会发生错误。</p>
<blockquote>
<p>面试: 你的数据库怎么支持高并发和异步操作？（通过句柄的方式）</p>
</blockquote>
</li>
<li><p>在demo中，业务模块与数据库模块的操作是通过一个双向链表进行的。一般而言我们在项目中，每个模块的交互都是采用双向链表的方式。<br> 为什么业务模块不直接操作mysql数据库，而是把数据同步到链表之后来操作链表呢？<br> 理论上，业务层完全不需要建立一个链表来同步数据库，这样不仅简单，而且容易维护。但是，这样设计最大的弱点是，性能很慢。如果有1000个用户同时查询员工信息，每次都从mysql数据库获取，性能很差。所以在内存中建立缓存，可提高性能。<br> 当然，并不是一定要加缓存，很多小型商业项目或企业内部项目（并发基本不会太多）就完全没有缓存的概念。</p>
</li>
</ol>
</div><div class="tags"><a href="/tags/计算机/">计算机</a></div><div class="post-nav"><a href="/compiling/" class="pre">编译过程要点</a><a href="/processAndThread/" class="next">进程与线程要点</a></div><div data-thread-key="database/" data-title="数据库要点" data-url="http://yanggang.site/database/" class="ds-share flat"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><a href="javascript:void(0);" class="ds-more">分享到：</a></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">微博</a></li><li><a href="javascript:void(0);" data-service="qzone" class="ds-qzone">QQ空间</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">腾讯微博                     </a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">微信</a></li></ul><div class="ds-share-icons-more"></div></div></div><div data-thread-key="database/" data-title="数据库要点" data-url="http://yanggang.site/database/" data-author-key="1" class="ds-thread"></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yanggang.site"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/emotion/">emotion</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/reading/">reading</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/technology/">technology</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/阅读/">阅读</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/网络/" style="font-size: 15px;">网络</a> <a href="/tags/书单/" style="font-size: 15px;">书单</a> <a href="/tags/计算机/" style="font-size: 15px;">计算机</a> <a href="/tags/C/" style="font-size: 15px;">C++</a> <a href="/tags/计划/" style="font-size: 15px;">计划</a> <a href="/tags/人生/" style="font-size: 15px;">人生</a> <a href="/tags/SVN/" style="font-size: 15px;">SVN</a> <a href="/tags/版本管理/" style="font-size: 15px;">版本管理</a> <a href="/tags/面试题/" style="font-size: 15px;">面试题</a> <a href="/tags/平凡/" style="font-size: 15px;">平凡</a> <a href="/tags/参考/" style="font-size: 15px;">参考</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/booklist/">2018阅读书单</a></li><li class="post-list-item"><a class="post-list-link" href="/mysql-tutorial/">MySQL多表查询</a></li><li class="post-list-item"><a class="post-list-link" href="/svn-tutorial/">SVN命令使用详解</a></li><li class="post-list-item"><a class="post-list-link" href="/cpp/">C++ 语言要点</a></li><li class="post-list-item"><a class="post-list-link" href="/shitiesheng2/">史铁生：好运设计</a></li><li class="post-list-item"><a class="post-list-link" href="/reference/">技术文章参考链接</a></li><li class="post-list-item"><a class="post-list-link" href="/interview/">面试题整理</a></li><li class="post-list-item"><a class="post-list-link" href="/note/">复习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/networkProgramming/">网络编程要点</a></li><li class="post-list-item"><a class="post-list-link" href="/compiling/">编译过程要点</a></li></ul></div><div class="widget"><div class="comments-title"><i class="fa fa-comment-o"> Recent Comments</i></div><div data-num-items="5" data-show-avatars="0" data-show-time="1" data-show-admin="0" data-excerpt-length="32" data-show-title="1" class="ds-recent-comments"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Blogroll</i></div><ul></ul><a href="https://www.haomwei.com/" title="屠城" target="_blank">屠城</a><ul></ul><a href="http://ibruce.info/" title="不如" target="_blank">不如</a><ul></ul><a href="http://coderlin.coding.me/" title="Edgar的博客" target="_blank">Edgar的博客</a><ul></ul><a href="https://www.the5fire.com/" title="the5fire的技术博客" target="_blank">the5fire的技术博客</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© 2018 - <a href="/." rel="nofollow">东坡烟尘 - </a>粤 ICP 备 12345678 号
 Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.1" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.1" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.1"><script>var duoshuoQuery = {short_name:'yanggang0055'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.1"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.1"></script></div></body></html>