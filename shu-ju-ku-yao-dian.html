<!DOCTYPE html>
<html lang="zh">
<head>

        <title>数据库要点</title>
        <meta charset="utf-8" />


        <!-- Mobile viewport optimized: j.mp/bplateviewport -->
        <meta name="viewport" content="width=device-width,initial-scale=1, maximum-scale=1">

        <link rel="stylesheet" type="text/css" href="http://yanggang.site/theme/gumby.css" />
        <link rel="stylesheet" type="text/css" href="http://yanggang.site/theme/style.css" />
        <link rel="stylesheet" type="text/css" href="http://yanggang.site/theme/pygment.css" />

        <script src="http://yanggang.site/theme/js/libs/modernizr-2.6.2.min.js"></script>




</head>

<body id="index" class="home">


    <div class="container">

        <div class="row">

          <header id="banner" class="body">
                  <h1><a href="http://yanggang.site/">东坡烟尘 </a></h1>
                  <h2><a href="http://yanggang.site/"><strong>静能生悟，即鸟啼花落，都是化机。</strong></a></h2>
          </header><!-- /#banner -->

            <div id="navigation" class="navbar row">
              <a href="#" gumby-trigger="#navigation &gt; ul" class="toggle"><i class="icon-menu"></i></a>
             
              <ul class="columns">
                <li><a href="http://yanggang.site/">Home</a></li>


              </ul>
            </div>

<section id="content" class="body">

   <div class="row">
        <div class="eleven columns">


            <header>
              <h2 class="entry-title">
                <a href="http://yanggang.site/shu-ju-ku-yao-dian.html" rel="bookmark"
                   title="Permalink to 数据库要点">数据库要点</a></h2>
           
            </header>
            <footer class="post-info">
              <abbr class="published" title="2016-09-07T18:59:00+08:00">
                三 07 九月 2016
              </abbr>
              <address class="vcard author">By 
                <a class="url fn" href="http://yanggang.site/author/yanggang.html"> yanggang</a>
              </address>
            </footer><!-- /.post-info -->
            <div class="entry-content">
              <ol>
<li>
<p>索引的类型:
    (1) 唯一索引
    (2) 非唯一索引
    (3) 主键索引
    (4) 聚集索引</p>
</li>
<li>
<p>主键与索引的区别:
    (1) 主键一般在创建表的时候指定，而索引可以在任何时候创建；
    (2) 一个表只能有一个主键，但可以有多个索引；
    (3) 主键也是一种索引，但索引不是主键;
    (4) 索引可以创建也可以删除。</p>
<p>参考资料：Mysql索引详解大全
http://www.cnblogs.com/renfanzi/p/5742650.html</p>
</li>
<li>
<p>C语言操作库函数：</p>
<p>http://blog.csdn.net/caisini_vc/article/details/38271991</p>
<p>特别注意：
（1）对于包含二进制数据的查询，必须使用 mysql_real_query()，而不是 mysql_query()，因为二进制代码数据可能包含“ \0”字符，而且前者比后者查询更快，因为它不会在查询字符串上调用 strlen()。项目中尽量使用前者。
（2）执行查询指令之后，再用 mysql_store_result() 函数获取查询结果。此函数返回的是结构指针，后面还需要用代码把结构的内容读到自己的程序里来。对于大的结果集，该函数所需的内存可能很大，甚至发生内存溢出。
（3）获取结果集之后，再用mysql_fetch_row() 循环读出每一行，该函数返回一个数组。
（4）mysql_commit() 提交事务，mysql_rollback() 回滚事务。</p>
</li>
<li>
<p>商用系统部分设计要点（以员工管理系统为例）
（1）包含两大模块：平台模块（实现通用功能如配置文件、日志、数据库操作接口等）和业务模块（实现员工管理业务）。
（2）配置文件一般要做到接口可以被各个子模块访问。配置数据应分为整数和字符串。配置文件的格式一般遵循 [module] config=value 的语法。
（3）日志信息非常有用，一般而言应该打印在日志文件中的信息包括：（a）系统日志信息（如各模块的启动信息）；（b）错误日志信息；（c）告警日志信息（比如系统最多支持1000个员工，当使用达到900人时发出告警）；（d）调试日志信息（或叫消息日志信息）。对应地，把上述四类信息定义为4个级别：系统日志级别、错误日志级别、告警日志级别、消息日志级别。交付给用户时只留下系统日志和错误日志。一般应允许用户在配置文件中修改日志级别。
（4）日志模块的接口要考虑通用性，因为各个业务模块要打印的信息可能结构不同，有整数、字符串等信息。每个模块调用时都可以选择自己的打印级别。
（5）日志模块要考虑文件系统允许的最大文件大小，比如可能有些系统限制最大2G，这时候要新建日志文件并将过去的日志按日期重命名整理。
（6）写日志的任务应该放到链表（异步任务队列），避免影响业务模块的性能。
（7）日志是独立的文件，应该单独占用一个目录 ./log/ 。</p>
</li>
<li>
<p>以Log4j为例，日志记录器（Logger）的行为是分等级的。具体分为：OFF、 FATAL、ERROR、WARN、INFO、DEBUG、TRACE、ALL或者您定义的级别。Log4j建议只使用四个级别，优先级从高到低分别是 ERROR、WARN、INFO、DEBUG。通过在这里定义的级别，您可以控制到应用程序中相应级别的日志信息的开关。比如在这里定义了INFO级别， 则应用程序中所有DEBUG级别的日志信息将不被打印出来。程序会打印高于或等于所 设置级别的日志，设置的日志等级越高，打印出来的日志就越少。如果设置级别为INFO，则优先级高于等于INFO级别（如：INFO、 WARN、ERROR）的日志信息将可以被输出,小于该级别的如DEBUG将不会被输出。</p>
</li>
<li>
<p>Python项目中日志文件的配置方法：
    http://python.jobbole.com/81666/</p>
</li>
<li>
<p>一个会话至少包含一个连接，可以完成多个事务。</p>
</li>
<li>
<p>高并发的概念：高并发是指多个线程同时调用你的接口的时候不会发生错误。</p>
<blockquote>
<p>面试: 你的数据库怎么支持高并发和异步操作？（通过句柄的方式）</p>
</blockquote>
</li>
<li>
<p>在demo中，业务模块与数据库模块的操作是通过一个双向链表进行的。一般而言我们在项目中，每个模块的交互都是采用双向链表的方式。
    为什么业务模块不直接操作mysql数据库，而是把数据同步到链表之后来操作链表呢？
    理论上，业务层完全不需要建立一个链表来同步数据库，这样不仅简单，而且容易维护。但是，这样设计最大的弱点是，性能很慢。如果有1000个用户同时查询员工信息，每次都从mysql数据库获取，性能很差。所以在内存中建立缓存，可提高性能。
    当然，并不是一定要加缓存，很多小型商业项目或企业内部项目（并发基本不会太多）就完全没有缓存的概念。</p>
</li>
</ol>
            </div><!-- /.entry-content -->
            <div class="comments">
              <h3>Comments</h3>
              <div id="disqus_thread"></div>
              <script type="text/javascript">
                var disqus_identifier = "shu-ju-ku-yao-dian.html";
                (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = 'https://yanggang-site.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
              </script>
            </div>


        </div><!-- /.eleven.columns -->

<div class="three columns">

<h4>Pages</h4>

 <ul>
  </ul>

<h4>Categories</h4>
<ul class="blank">
		<li><a href="http://yanggang.site/category/ji-suan-ji.html">计算机</a></li>
		<li><a href="http://yanggang.site/category/xin-qing.html">心情</a></li>
</ul>




<nav class="widget">
  <h4>Social</h4>
  <ul class="blank">
    <li><a href="https://github.com/vincent08">github</a></li>
  </ul>
</nav>

</div> </div><!-- /.row -->


</section>

       </div><!-- /.row -->
    </div><!-- /.container -->


       <div class="container.nopad bg">

    
        <footer id="credits" class="row">
          <div class="seven columns left-center">

                   <address id="about" class="vcard body">
                    交友须带三分侠气，做人要存一点素心。
                    <br>
                    E-mail: yanggang@yanggang.site
                    <br>
                    本博客使用<a href="http://getpelican.com/">Pelican</a>搭建，基于<a target="_blank" href="http://gumbyframework.com">Gumby</a>框架。
                    <br>
                    Copyright 2016 - 2018 东坡烟尘.
                  </address>
          </div>


          <div class="seven columns">
            <div class="row">
              <ul class="socbtns">





              </ul>
            </div>
          </div>
        </footer>

    </div>


<script type="text/javascript">
    var disqus_shortname = 'yanggang-site';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
  <script src="http://yanggang.site/theme/js/libs/jquery-1.9.1.min.js"></script>
  <script src="http://yanggang.site/theme/js/libs/gumby.min.js"></script>
  <script src="http://yanggang.site/theme/js/plugins.js"></script>
</body>
</html>