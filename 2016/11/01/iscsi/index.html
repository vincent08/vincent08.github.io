<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>iSCSI项目要点 | 东坡烟尘</title><link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Source+Code+Pro"><link rel="stylesheet" type="text/css" href="/css/style.css?v=1.0.0"><link rel="stylesheet" type="text/css" href="/css/highlight.css?v=1.0.0"><link rel="Shortcut Icon" href="/favicon.ico"><link rel="bookmark" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">iSCSI项目要点</h1><a id="logo" href="/.">东坡烟尘</a><p class="description">静能生悟，即鸟啼花落，都是化机。</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="layout-g"><div class="layout-l"><div class="content_container"><div class="post"><h1 class="post-title">iSCSI项目要点</h1><div class="post-meta">Nov 1, 2016<span> | </span><span class="category"><a href="/categories/technology/">technology</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><div class="post-content"><p>iSCSI (Internet Small Computer System Interface)是存储界非常重要的一个协议。它是一种基于因特网及SCSI-3协议下的存储技术，由IETF提出，并于2003年2月11日成为正式的标准。</p>
<p>  虽然 iSCSI 可以与任意类型的 SCSI 设备进行通信，系统管理员几乎总是使用它来连接服务器计算机 （例如，数据库服务器） 和磁盘卷上存储阵列。 使用iSCSI SAN 的目的通常有以下两个：</p>
<ul>
<li>存储整合：公司希望将不同的存储资源从分散在网络上的服务器移动到统一的位置（常常是数据中心）； 这可以让存储的分配变得更为有效。 SAN 环境中的服务器无需任何更改硬件或电缆连接就可以得到新分配的磁盘卷。</li>
<li><p>灾难恢复：公司希望把存储资源从一个数据中心镜像到另一个远程的数据中心上，后者在出现长时间停电的情况下可以用作热备份。 特别是，iSCSI SAN 使我们只需要用最小的配置更改就可以在 WAN 上面迁移整个磁盘阵列，实质上就是，把存储变成了“可路由的”，就像普通的网络通信一样。</p>
<p>iSCSI服务器端示例项目的设计要点：</p>
</li>
</ul>
<ol>
<li><p>项目为每个网口启动两个线程，一个是监听线程，另一个是数据处理线程。</p>
</li>
<li><p>客户端与服务器端的数据交互过程：</p>
<ul>
<li>首先客户端有一个发现过程（可以是登录，获取服务器名称、ip和端口号，然后马上退出）</li>
<li>然后是登录过程</li>
<li>数据协商过程（比如，最大发送的数据包大小、最大接收的数据包大小，是否建立握手机制，多久握手一次，一个服务端支持多少个TCP连接，发送的数据是否需要校验，是否需要加密处理数据，是否需要按序列号整理收到的数据包等等）</li>
<li>客户端与服务器开始交互数据</li>
</ul>
</li>
<li><p>软件系统是如何统计TCP数据流量的：对接收或发送的数据的字节长度进行累加即可，另外记住上一秒的累加值，二者相减即可得出瞬时传输速率。</p>
</li>
<li><p>断点续传：比如当客户端传输一个GB级大小的文件时，中间发生网络异常或拥塞。这时，服务器发现有一个数据包没有接收到，等待3秒或5秒后，主动发送一个消息给客户端，告诉客户端哪个命令的那个子序列号的数据包没有接收到，需要重新发送。客户端收到后将该数据包重新发送即可。</p>
</li>
<li><p>怎样监测客户端的状态：一般通过心跳机制来达到客户端与服务器端的相互监控。</p>
</li>
</ol>
</div><div class="tags"><a href="/tags/网络/">网络</a></div><div class="post-nav"><a href="/2016/11/12/cpp/" class="pre">C++ 语言要点</a><a href="/2016/10/24/shitiesheng2/" class="next">史铁生：好运设计</a></div></div></div></div><div class="layout-r"><div id="sidebar"><div class="widget"><div id="search-form"><div id="result-mask" class="hide"></div><label><input id="search-key" type="text" autocomplete="off" placeholder="请输入关键字..."/></label><div id="result-wrap" class="hide"><div id="search-result"></div></div><div class="hide"><template id="search-tpl"><div class="item"><a href="/{path}" title="{title}"><div class="title">{title}</div><div class="time">{date}</div><div class="tags">{tags}</div></a></div></template></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-gui"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/emotion/">emotion</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/reading/">reading</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/technology/">technology</a><span class="category-list-count">10</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-biao"> 标签</i></div><div class="tagcloud"><a href="/tags/计算机/" style="font-size: 15px;">计算机</a> <a href="/tags/C/" style="font-size: 15px;">C++</a> <a href="/tags/面试题/" style="font-size: 15px;">面试题</a> <a href="/tags/网络/" style="font-size: 15px;">网络</a> <a href="/tags/平凡/" style="font-size: 15px;">平凡</a> <a href="/tags/参考/" style="font-size: 15px;">参考</a> <a href="/tags/人生/" style="font-size: 15px;">人生</a> <a href="/tags/史铁生/" style="font-size: 15px;">史铁生</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-fei"> 归档</i></div><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-xie"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2016/11/12/cpp/">C++ 语言要点</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/01/iscsi/">iSCSI项目要点</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/24/shitiesheng2/">史铁生：好运设计</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/24/shitiesheng1/">史铁生：相逢何必曾相识</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/23/reference/">技术文章参考链接</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/23/interview/">腾讯面试题</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/01/note/">复习笔记</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/11/networkProgramming/">网络编程要点</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/09/compiling/">编译过程要点</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/07/database/">数据库要点</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-you"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div></div><a id="totop" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=1.0.0" async></script><div id="footer"><div class="footer-info"><p><a href="/baidusitemap.xml">网站地图</a> |<a href="/atom.xml">订阅本站</a> |<span>联系博主：<a href="mailto:zhenggchaoo@gmail.com" target="_blank" class="fa fa-email"> </a><a href="http://weibo.com/zhengchaooo" target="_blank" class="fa fa-weibo"></a><a href="https://github.com/chaooo" target="_blank" class="fa fa-github"> </a></span></p><p><span> Copyright &copy;<a href="/." rel="nofollow">Vincent</a></span><span> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a></span><span><a rel="nofollow" target="_blank" href="https://github.com/chaooo/hexo-theme-BlueLake"> Theme </a>by<a rel="nofollow" target="_blank" href="https://github.com/chaooo"> Charles.</a></span></p></div></div></div><script type="text/javascript" src="/js/search.json.js?v=1.0.0"></script></body></html>